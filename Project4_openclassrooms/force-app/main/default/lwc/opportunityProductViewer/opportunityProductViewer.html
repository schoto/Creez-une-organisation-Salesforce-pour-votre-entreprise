<template>
    <!-- Alerte si une ou plusieurs lignes dépassent le stock -->
    <template if:true={hasAlert}>
        <div class="slds-box slds-theme_alert-texture slds-theme_warning">
            <p>{label.LabelAlertQuantity}</p>
        </div>
    </template>

    <!-- Message si aucun produit n’est lié à l’opportunité -->
    <template if:true={noProducts}>
        <div class="slds-box slds-theme_alert-texture slds-theme_warning">
            <p><strong>{label.LabelNoProducts}</strong></p>
        </div>
    </template>

    <!-- Tableau des produits si au moins une ligne existe -->
    <template if:false={noProducts}>
        <div style="height: 300px;">
            <!--
                Datatable :
                - key-field : identifiant unique des lignes (Id de l’OLI)
                - data      : données préparées dans le JS
                - columns   : colonnes construites selon le profil
                - onrowaction : gestion des clics (voir / supprimer)
            -->
            <lightning-datatable
                key-field="Id"
                data={data}
                columns={columns}
                onrowaction={handleRowAction}>
            </lightning-datatable>
        </div>
    </template>
</template>